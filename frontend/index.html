<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>

<main id="content">
    <form action="" id="form-join">
        <input type="text" placeholder="Room Id" id="room_id">
    </form>
    <canvas id="canvas" width="960" height="600"></canvas>
</main>

<script src="./socket.io/socket.io.js"></script>
<script src="./Main.js"></script>
<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<script>
    // Global Variable

    let canvas = document.getElementById('canvas');
    let ctx = canvas.getContext('2d');
    let main = new Main();

    $(function () {
        // Socket

        var socket = io('http://localhost:3000');

        let form = $("#form-join");

        form.on('submit', function (e) {
            e.preventDefault();
            let room_id = $('#room_id');
            if (room_id) {
                socket.emit('join', {
                    name: 'user_' + Math.random().toString(36).substr(2, 9),
                    room: room_id.val()
                });
            }
        });

        socket.on('connected', function (res) {
            main.init(res.data.users, res.data.total_user, res.data.ball);
        });
    });
</script>
</body>
</html>